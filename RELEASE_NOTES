# v0.4.0

In this minor release:
- Deprecated Python 3.8 support
- Added more alert parsers (e.g. for INTEGRAL messages)
- Added option to control triggering the automatic planning depending on skymap area

## v0.4.1

- Fixed incorrect naming of alert origin after cross-matching

## v0.4.2

- Fixed unable to run without -t option if Telegram API not set

## v0.4.3

- Fixed issue, when Swift alerts were marked as retracked mistakenly
- Fixed float number format in LVC alerts
- Fixed the tool to bump new version into files
- Added global FAR threshold for LVC alerts

## v0.4.4

- Fixed issue, when LVC alerts were not received, because they have empty fields
- Fixed large memory consumption in alert crossmatching, limit 300 rows per query
- Fixed plot file saving (now use sanitized filename for the OS)
- Fixed subscription problem due to overflow in chat_id column in the Database
- Fixed incorrect name of OPD 1.6 meter telescope
- Added 0.5-meter telescope of Kuban' State University
- Importance estimation for LVC alerts (0.99 at FAR=3 events per year)
- Account for local Sun rise and set times, when estimating target visibility
- Visibility now is computed on the grid digitilized according to a telescope exposure and slew rate
- Updated default settings for all telescopes (exposure time to 30 sec and Sun set altitude to -12 degrees)
- Comment for observers in Telegram messages
- Completely removed chat_id logging from the bot
- Temporarily removed run, stop, and resume commands from the bot
- List of available telescopes appears sorted now in Telegram
- 300 dpi in sky find chart, and better colors

## v0.4.5

- Fixed issue with id columns of alert and settings tables in the database
- Settings table now has separate id column as a primary key
- Chat id column in the settings table now has VARCHAR(256) type (autoconvertable to int in Python) to prevent overflows caused by integer values in SQL
- Fixed incorrectly provided DPI option in the sky find chart
- Fixed incorrect unit of a scale bar in the sky find chart
- Display smoothed DSS2 image in the sky find chart
- Fixed ICECUBE and MAXI information message clobbering
- Added test for the find chart plot
- Added test for the settings table

## v0.4.6

- Fixed problem with conical MOC creation with mocpy>0.12

## v0.4.7

- Fixed circular import in LVC plugin, when using AWARE in interactive mode
- Fixed visibility curve calculation, introduced in v0.4.4
- Added cache_ok=True flag for TelegramID type
- Use default naming convention for table constraints for easier migration
- Define declarative base in SQLAlchemy 2.0 style

## v0.4.8

- Fixed incorrect plot safe filename in plotting
- Fixed absent default value for VOEvent parameters
- Fixed survey name in finding chart from DSS2 to DSS2 R
- Fixed Kafka client configuration (in test mode, auto.commit is disabled, and group.id
 is empty; in production mode group.id is uniquely set at each run),

- Added type hint for config options
- Added new script for visibility plots
- Updated find chart plot (added compass)
- Updated visibility plot (main yaxis is altitude now; the Moon phase, and separation angle)
- Restored alert rejection functionality (a new event matching previously rejected one, 
will be also rejected; all matched alerts with currently rejected one, will be marked 
as rejected in the database)
- Added cache support for queries to SkyView, telescope list retrieval, subscribers querying, 
and for displaying available telescopes


# v0.3.0

Since this release, native Windows platform is not supported!

## New planning system. 
The observation planner tries to cover the most probable are of the GW event with mosaic and target observations. It is considered that in automatic mode, as GW skymap received and GW classified as BNS or NSBH, the observation plan will be created for a first night. The planner computes how many targets a telescope can observe during the night, provided that the telescope slew time is constant, but not zero. Also, it performs a kind of clustering with nearest neighbor algorithm, since we do not want a telescope "jumps" between sky fields or targets, significantly.

## Updated Telegram bot
The Telegram bot logic is rewritten in such way, that a user must subscribe to the user before receiving alert messages and observation plans. The subscription dialog is very intuitive and contains a list of alert types that could be received, and a list of telescopes for which the bot sends the observational data. 

## Executable scripts
Added several scripts to be able to perform sky map displaying, planning, etc in place. The possible use case is when a one wants to make plans for next days of observations (remember that 1st day planning is possibly performed) or re-create the plans, for instance, with an addition of other telescopes.

## API
Changes to API:
- Config file is no more needed for using AWARE
- All config options have attribute <code>value</code> for a convenient access to the value
- Added more observatories
- Based on observatory, there is a certain format for the list of targets/sky fields for observations
- Telescopes have default values for photometric filter, exposure time, exposure count
- Alert events are cross-matched before sending the alert messages in Telegram and creating the plans
- Something more we forgot to mention :)

